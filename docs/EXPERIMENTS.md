# 实验与探索记录（精简版）

本文整理项目中“探索性、可选项”的结论与方法，去除冗余表述，便于查阅与复用。面向读者：已读过 README 讲义、希望进一步做参数与工程优化的同学。

- 工具基线
  - 质量脚本：`./scripts/lint.sh`（依次执行 ruff format → ruff check → uvx ty check → pytest）
  - 风格/类型：ruff 规则集 E,F,I,UP,B,PERF；ty 类型检查（无 mypy 依赖）
  - 测试：pytest 启用详细输出与最慢用例统计

- 当前结果概览
  - 测试（教学参数）5/5 通过；总耗时约 0.78s，最慢单例 ~0.18s
  - 一键质量检查通过：ruff、ty、pytest 全绿

- 历史性能基线（仅供参考）
  - 早期全量 demo 脚本（scripts/run_demos.sh）一次执行约 26.5s（含多示例与打印），后续未继续以该口径衡量

- 已验证的微优化（保留）
  - univariate：反缩放求值缓存幂（`X_pow` 与 `r_pow`）
  - elimination：`lcm/gcd` 改为显式循环，避免 reduce 的类型歧义
  - import/类型：统一使用内置泛型（list/dict/tuple），整理导入顺序，限制行宽 100

- 尝试后回退（不建议保留）
  - LLL 增量式 Gram–Schmidt：在教学实现中影响数值稳定，导致二元示例失败，已回退为每轮重算 GS
  - 二元回代阶段的“x 幂缓存”：在小规模参数下收益不明显，保留直观实现

- 参数调优建议（经验性，先用后调）
  - 单变量：`d=deg(f)`，通常取 `m≈d, t≈d`；`X ≤ N^{1/d}` 的量级更稳
  - 二元：`(m, tx, ty)` 先从 `(2,2,2)` 起步；适度增大 `m` 提升成功率但加重计算；`X,Y` 先取保守值
  - 找不到根：减小 `X`/`Y` 或增大 `(m, t)` / `(m, tx, ty)`；必要时简化多项式结构

- 可复用场景模型（已实现）
  - RSA e=3 小消息：`f(x)=x^3-c`，`X≈N^{1/3}`
  - 已知素因子高位：`F(x,y)=(p0+x)(q0+y)-N`，`X≈2^{b-k}`
  - 构造二元小根：`F(x,y)=x^2+y+c`，`c≡-(r^2+s) (mod N)`

- 后续可探索（未默认启用）
  - 参数扫描器：网格扫描 `(m,t,X)` 与 `(m,tx,ty,X,Y)`，输出 JSON/CSV 成功率与耗时矩阵
  - 二元“直接解 y”：在确定 `x` 后，基于有理多项式带余除法/扩展欧几里得消去 `y`，减少枚举
  - 结果式插值稳健性：跳过降阶/全零采样点，增加冗余采样并做鲁棒拟合

- 常用命令
  - 质量检查：`./scripts/lint.sh`
  - 仅类型：`uvx ty check`
  - 仅风格：`ruff format . && ruff check .`
  - 仅测试：`pytest`

> 说明：本文件仅记录探索性与工程性内容，不影响讲义（README）中的主线推导与实现。
